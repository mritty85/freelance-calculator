<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Build Your Budget - Freelance Rate Calculator</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Loading Overlay -->
  <div id="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-message">Calculating your budget...</div>
    </div>
  </div>

  <!-- Messages -->
  <div id="error-message" class="alert alert-danger" style="display: none; position: fixed; top: 1rem; left: 50%; transform: translateX(-50%); z-index: 1000; min-width: 300px;"></div>
  <div id="success-message" class="alert alert-success" style="display: none; position: fixed; top: 1rem; left: 50%; transform: translateX(-50%); z-index: 1000; min-width: 300px;"></div>

  <!-- Header -->
  <header style="background: white; border-bottom: 1px solid #e5e7eb; padding: 1rem 0;">
    <div class="container">
      <h2>Build Your Budget</h2>
    </div>
  </header>

  <!-- Main Content -->
  <main class="section">
    <div class="container-sm">
      <!-- Progress Bar -->
      <div class="progress-bar">
        <div class="progress-steps">
          <div class="progress-step active" data-step="1">
            <span class="progress-step-number">1</span>
            <span class="progress-step-label">Profile</span>
          </div>
          <div class="progress-step" data-step="2">
            <span class="progress-step-number">2</span>
            <span class="progress-step-label">Expenses</span>
          </div>
          <div class="progress-step" data-step="3">
            <span class="progress-step-number">3</span>
            <span class="progress-step-label">Overhead</span>
          </div>
          <div class="progress-step" data-step="4">
            <span class="progress-step-number">4</span>
            <span class="progress-step-label">Cash Flow</span>
          </div>
        </div>
        <div class="progress-track">
          <div id="progress-bar-fill" class="progress-bar-fill" style="width: 0%;"></div>
        </div>
      </div>

      <!-- Form -->
      <form id="budget-form">
        <!-- Step 1: Profile Setup -->
        <div id="step-1" class="form-step card">
          <div class="card-header">
            <h3>Step 1: Profile Setup</h3>
            <p class="text-muted">Tell us about yourself and your location</p>
          </div>

          <div class="form-group">
            <label for="service" class="form-label form-label-required">Primary Service/Skill</label>
            <select id="service" name="service" class="form-select" required>
              <option value="">Select your primary service...</option>
              <option value="web-development">Web Development</option>
              <option value="design">Design (Graphic/UI/UX)</option>
              <option value="marketing">Marketing/Social Media</option>
              <option value="writing">Writing/Content Creation</option>
              <option value="consulting">Consulting</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="experience" class="form-label">Years of Experience</label>
            <select id="experience" name="experience" class="form-select">
              <option value="0-1">0-1 years (Entry level)</option>
              <option value="1-3">1-3 years (Early career)</option>
              <option value="3-5" selected>3-5 years (Mid-level)</option>
              <option value="5-10">5-10 years (Senior)</option>
              <option value="10+">10+ years (Expert)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="location" class="form-label form-label-required">State (Location)</label>
            <select id="location" name="location" class="form-select" required>
              <option value="">Select your state...</option>
              <option value="CA">California</option>
              <option value="NY">New York</option>
              <option value="TX">Texas</option>
              <option value="FL">Florida</option>
              <option value="IL">Illinois</option>
              <option value="MA">Massachusetts</option>
              <!-- Add more states as needed -->
            </select>
            <span class="form-help">Used for state tax calculations</span>
          </div>

          <div class="form-group">
            <label for="filing-status" class="form-label form-label-required">Filing Status</label>
            <select id="filing-status" name="filing-status" class="form-select" required>
              <option value="">Select filing status...</option>
              <option value="single" selected>Single</option>
              <option value="married">Married filing jointly</option>
              <option value="hoh">Head of household</option>
            </select>
          </div>
        </div>

        <!-- Step 2: Personal Expenses -->
        <div id="step-2" class="form-step card" style="display: none;">
          <div class="card-header">
            <h3>Step 2: Personal Living Expenses</h3>
            <p class="text-muted">What do you need to take home each month?</p>
          </div>

          <div class="form-group">
            <div class="form-checkbox">
              <input type="checkbox" id="use-simplified" name="use-simplified" checked>
              <label for="use-simplified">Use simplified categories (recommended)</label>
            </div>
          </div>

          <!-- Simplified Expenses -->
          <div id="simplified-expenses">
            <div class="form-group">
              <label for="essential-expenses" class="form-label form-label-required">Monthly Essential Expenses</label>
              <input type="number" id="essential-expenses" name="essential-expenses" class="form-input" min="0" step="50" placeholder="4000" required>
              <span class="form-help" id="expense-suggestion">Housing, utilities, food, transportation, insurance</span>
            </div>

            <div class="form-group">
              <label for="debt-savings" class="form-label">Monthly Debt/Savings</label>
              <input type="number" id="debt-savings" name="debt-savings" class="form-input" min="0" step="50" placeholder="800">
              <span class="form-help">Student loans, credit cards, emergency fund contributions</span>
            </div>

            <div class="form-group">
              <label for="lifestyle-spending" class="form-label">Monthly Lifestyle Spending</label>
              <input type="number" id="lifestyle-spending" name="lifestyle-spending" class="form-input" min="0" step="50" placeholder="500">
              <span class="form-help">Entertainment, hobbies, travel, discretionary</span>
            </div>
          </div>

          <!-- Detailed Expenses (hidden by default) -->
          <div id="detailed-expenses" style="display: none;">
            <p class="text-muted mb-2">Break down your expenses in detail:</p>
            <!-- Add detailed expense fields here in production -->
            <p class="text-small text-muted">Detailed expense breakdown coming soon...</p>
          </div>
        </div>

        <!-- Step 3: Business Overhead -->
        <div id="step-3" class="form-step card" style="display: none;">
          <div class="card-header">
            <h3>Step 3: Business Overhead</h3>
            <p class="text-muted">The cost of being a freelancer</p>
          </div>

          <!-- Health Insurance -->
          <div class="form-group">
            <div class="form-checkbox">
              <input type="checkbox" id="needs-health-insurance" name="needs-health-insurance">
              <label for="needs-health-insurance">I need to buy my own health insurance</label>
            </div>
          </div>

          <div id="health-insurance-details" style="display: none;">
            <div class="form-group">
              <label for="health-insurance-type" class="form-label">Insurance Type</label>
              <select id="health-insurance-type" name="health-insurance-type" class="form-select">
                <option value="individual">Individual ($600/month)</option>
                <option value="family">Family ($1,600/month)</option>
              </select>
            </div>

            <div class="form-group">
              <label for="health-insurance-premium" class="form-label">Monthly Premium</label>
              <input type="number" id="health-insurance-premium" name="health-insurance-premium" class="form-input" min="0" step="10" placeholder="600">
              <span class="form-help">Premiums are 100% tax deductible</span>
            </div>
          </div>

          <!-- Retirement -->
          <div class="form-group">
            <label for="retirement-percentage" class="form-label">Retirement Savings Goal</label>
            <select id="retirement-type" name="retirement-type" class="form-select">
              <option value="percentage" selected>Percentage of gross income</option>
              <option value="fixed">Fixed dollar amount</option>
            </select>
          </div>

          <div class="form-group">
            <input type="number" id="retirement-percentage" name="retirement-percentage" class="form-input" min="0" max="50" value="10">
            <span class="form-help">Typical: 10-15% (replaces employer 401k match)</span>
          </div>

          <!-- Business Expenses -->
          <div class="form-group">
            <label for="business-expenses-monthly" class="form-label">Monthly Business Expenses</label>
            <input type="number" id="business-expenses-monthly" name="business-expenses-monthly" class="form-input" min="0" step="50" placeholder="400">
            <span class="form-help" id="biz-expense-suggestion">Software, equipment, office, marketing</span>
          </div>

          <!-- PTO -->
          <div class="form-group">
            <label for="pto-weeks" class="form-label">Weeks of Unpaid Time Off</label>
            <input type="number" id="pto-weeks" name="pto-weeks" class="form-input" min="0" max="12" value="2">
            <span class="form-help">Vacation, sick days, holidays you won't bill</span>
          </div>

          <!-- Professional Development -->
          <div class="form-group">
            <label for="professional-dev" class="form-label">Annual Professional Development</label>
            <input type="number" id="professional-dev" name="professional-dev" class="form-input" min="0" step="100" placeholder="2000">
            <span class="form-help">Courses, conferences, certifications</span>
          </div>
        </div>

        <!-- Step 4: Cash Flow Buffer -->
        <div id="step-4" class="form-step card" style="display: none;">
          <div class="card-header">
            <h3>Step 4: Cash Flow Buffer</h3>
            <p class="text-muted">Account for payment delays and project gaps</p>
          </div>

          <div class="alert alert-info mb-3">
            <strong>Why this matters:</strong> Clients often pay Net 30-90 days after you complete work. You need cash reserves to cover this gap.
          </div>

          <div class="form-group">
            <label for="payment-terms" class="form-label">Typical Payment Terms</label>
            <select id="payment-terms" name="payment-terms" class="form-select">
              <option value="15">Net 15 (2 weeks)</option>
              <option value="30" selected>Net 30 (1 month)</option>
              <option value="60">Net 60 (2 months)</option>
              <option value="90">Net 90 (3 months)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="gap-weeks" class="form-label">Project Gap Buffer (weeks)</label>
            <input type="number" id="gap-weeks" name="gap-weeks" class="form-input" min="0" max="12" value="2">
            <span class="form-help">Average time between projects ending and new ones starting</span>
          </div>

          <div class="alert alert-warning mt-3">
            <strong>Cash Flow Example:</strong> If clients pay Net 60 and you have 2 weeks between projects, you need ~2.5 months of expenses as buffer. We'll amortize this cost over 3 years.
          </div>
        </div>

        <!-- Navigation -->
        <div class="btn-group">
          <button type="button" id="btn-prev" class="btn btn-secondary" style="display: none;">
            ← Previous
          </button>
          <button type="button" id="btn-save-draft" class="btn btn-outline">
            Save Draft
          </button>
          <button type="button" id="btn-next" class="btn btn-primary">
            Next Step →
          </button>
        </div>
      </form>
    </div>
  </main>

  <script src="js/config.js"></script>
  <script src="js/app.js"></script>
  <script src="js/budget-form.js"></script>
</body>
</html>
